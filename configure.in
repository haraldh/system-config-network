AC_INIT(./acinclude.m4)

MAJOR=1
MINOR=1
RELEASE=87

AM_INIT_AUTOMAKE(redhat-config-network, $MAJOR.$MINOR.$RELEASE)

PYTHON=python2.2
AC_SUBST(PYTHON)

ALL_LINGUAS="cs da de el es fr is it ja ko no pt ru sv tr zh_CN zh_TW"

paths=`python2.2 <<EOF
import sys;
for p in sys.path:
   if len(p): print p
EOF`

AC_MSG_CHECKING([for your python path])
AC_SUBST(PY_PYTHONPATH)
PY_PYTHONPATH=`python2.2 <<EOF
import sys;
path=""
for p in sys.path:
   if len(p): 
	if path: path=path + p + ":" 
	else: path=p
print path;
EOF`
AC_MSG_RESULT([$PY_PYTHONPATH]);


AC_MSG_CHECKING([for compileall])

AC_SUBST(PY_COMPILEALL)
PY_COMPILEALL="/usr/lib/python2.2/compileall.pyc"
for p in $paths;do test -f "$p/compileall.pyc" && PY_COMPILEALL="$p/compileall.pyc" && break;done

if ! test -f $PY_COMPILEALL;then
	AC_MSG_ERROR([compileall.pyc not found in $PY_PYTHONPATH]);
else
	AC_MSG_RESULT([$PY_COMPILEALL]);
fi

AC_MSG_CHECKING([for pydoc])

AC_SUBST(PY_PYDOC)
PY_PYDOC="/usr/lib/python2.2/pydoc.py"
for p in $paths;do test -f "$p/pydoc.py" && PY_PYDOC="$p/pydoc.py" && break;done

if ! test -f $PY_PYDOC;then
	AC_MSG_ERROR([pydoc.py not found in $paths]);
else
	AC_MSG_RESULT([$PY_PYDOC]);
fi


dnl prevent to copy po/Makefile.in.in
GETTEXT_PACKAGE=redhat-config-network
AC_SUBST(GETTEXT_PACKAGE)
AM_GLIB_GNU_GETTEXT
AC_PROG_INTLTOOL
AC_PROG_LN_S

AC_OUTPUT([
Makefile
config.h
doc/Makefile
doc/figs/Makefile
doc/stylesheet-images/Makefile
src/Makefile
src/doc/Makefile
src/pixmaps/Makefile
src/netconfpkg/Makefile
src/netconfpkg/tests/Makefile
src/netconfpkg/gui/Makefile
src/version.py
redhat-config-network.spec
po/Makefile.in
])
